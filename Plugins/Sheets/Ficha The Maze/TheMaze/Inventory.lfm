<?xml version="1.0" encoding="UTF-8"?>
<form name="frmInventory" align="client">
	<scrollBox align="client">
		<rectangle color="#000000" width="1363" height="686"/>
		
		<rectangle left="0" top="0" width="610" height="550" color="black" strokeColor="white" strokeSize="1">
			<label left="5" top="5" width="100" height="25" horzTextAlign="center" text="Nome"/>
			<label left="105" top="5" width="250" height="25" horzTextAlign="center" text="Efeito"/>
			<label left="355" top="5" width="150" height="25" horzTextAlign="center" text="Tipo"/>
			<label left="505" top="5" width="25" height="25" horzTextAlign="center" text="Qtd"/>
			<label left="530" top="5" width="25" height="25" horzTextAlign="center" text="Max"/>

			<recordList left="5" top="30" width="600" height="520" name="rclInventario" field="listaDeItens" templateForm="frmItem" layout="vertical" minQt="6"/>
		</rectangle>

		<rectangle left="615" top="0" width="310" height="85" color="black" strokeColor="white" strokeSize="1">
			<label left="0" top="5" width="310" height="25" horzTextAlign="center" text="Armazenamento"/>
			<comboBox left="5" top="30" width="300" height="25" field="armazenamento1" items="{'', 'Bolsa Pequena', 'Bolsa Grande', 'Mochila', 'Mochila Grande'}" values="{'0','4','5','6','7'}"/>
			<comboBox left="5" top="55" width="300" height="25" field="armazenamento2" items="{'', 'Bolsa Pequena', 'Bolsa Grande', 'Mochila', 'Mochila Grande'}" values="{'0','4','5','6','7'}"/>


			<dataLink fields="{'armazenamento1','armazenamento2'}">
				<event name="onChange">
					if sheet==nil then return end;
					local armazenamento1 = (tonumber(sheet.armazenamento1) or 0);
					local armazenamento2 = (tonumber(sheet.armazenamento2) or 0);
					local tamanho = 6 + armazenamento1 + armazenamento2;
					sheet.inventarioTamanho = tamanho;
					self.rclInventario.minQt = tamanho;

					local objetos = ndb.getChildNodes(sheet.listaDeItens);

					if #objetos > tamanho then
						local excesso = #objetos - tamanho;
						showMessage("Você possui " .. excesso .. " itens além do limite.");
					end;
				</event>
			</dataLink>
		</rectangle>
	</scrollBox>
</form>